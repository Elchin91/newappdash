# Обновление Hourly View и Detailed Daily метрики

## Выполненные изменения

### 1. Создан новый компонент HourlyView.tsx

**Файл:** `db-management-app/frontend/src/components/HourlyView.tsx`

- Создан полноценный компонент для отображения почасовых данных
- Убрана метрика "Detailed daily" из Hourly view (как требовалось)
- Добавлена структура для будущей реализации почасовых таблиц
- Интерфейс готов для интеграции с реальными данными из MySQL

**Особенности:**
- Поддержка всех стандартных метрик кроме detailed_daily
- Готовая структура таблицы с 24 часовыми колонками
- Заглушка для экспорта данных
- Адаптивный дизайн в темной теме

### 2. Обновлен Dashboard.tsx

**Файл:** `db-management-app/frontend/src/components/Dashboard.tsx`

- Добавлен импорт нового HourlyView компонента
- Обновлен рендер для hourly view - теперь использует полноценный компонент
- Передача всех необходимых пропсов в HourlyView

### 3. Обновлен Sidebar.tsx

**Файл:** `db-management-app/frontend/src/components/Sidebar.tsx`

- Добавлена фильтрация метрик для Hourly view
- Метрика "Detailed daily" скрыта для hourly view
- Сохранена метрика "Detailed daily" для daily view

**Логика фильтрации:**
```typescript
.filter(metric => {
  // Скрываем detailed_daily для hourly view
  if (activeView === 'hourly' && metric.id === 'detailed_daily') {
    return false;
  }
  return true;
})
```

### 4. Расширен DailyView.tsx

**Файл:** `db-management-app/frontend/src/components/DailyView.tsx`

#### Добавлены новые интерфейсы:
```typescript
interface HourlyDetailedData {
  date: string;
  metric: string;
  hour_0: number | string;
  hour_1: number | string;
  // ... до hour_23
}
```

#### Новая функциональность:
- **generateMockHourlyData()** - генерация заглушки почасовых данных
- **Обработка detailed_daily** в updateChartData() 
- **Специальная таблица** для detailed_daily метрики
- **Группировка данных по дням** с отдельными таблицами для каждого дня

#### Особенности detailed_daily:
- Показывает почасовые данные для всех метрик (Calls, AHT, SL, Abandoned, Chats, FRT, RT, Agents, Total)
- Каждый день отображается в отдельной таблице
- Цветовая кодировка для разных метрик
- График не отображается (только таблица)
- Данные основаны на SQL запросах из `Hourly sql.txt`

### 5. Структура почасовых данных

Основана на SQL запросах из файла `Hourly sql.txt`:

**Метрики:**
- **Calls** - количество звонков по часам
- **AHT (min)** - среднее время обработки в минутах
- **SL (%)** - уровень сервиса в процентах  
- **Abandoned** - заброшенные звонки
- **Chats** - количество чатов
- **FRT (min)** - время первого ответа
- **RT (min)** - время решения (в примере все нули)
- **Agents** - количество агентов
- **Total** - общий итог (Calls + Chats)

**Формат таблицы:**
```
Метрика / 03.06
┌─────────────┬──────┬──────┬──────┬─────┬─────┐
│ Метрика     │ 0:00 │ 1:00 │ 2:00 │ ... │23:00│
├─────────────┼──────┼──────┼──────┼─────┼─────┤
│ Calls       │  12  │   4  │   4  │ ... │  8  │
│ AHT (min)   │   2  │   3  │   2  │ ... │  2  │
│ SL (%)      │ 100  │ 100  │ 100  │ ... │ 100 │
│ ...         │ ...  │ ...  │ ...  │ ... │ ... │
└─────────────┴──────┴──────┴──────┴─────┴─────┘
```

## Использование

### Hourly View
1. Выберите "Hourly" в Dashboard
2. Выберите любую метрику кроме "Detailed daily"
3. Установите период дат
4. Нажмите "Apply"

### Detailed Daily в Daily View
1. Выберите "Daily" в Dashboard  
2. Выберите метрику "Detailed daily"
3. Установите период дат
4. Нажмите "Apply"
5. Увидите почасовые таблицы для каждого дня периода

## Готовность к интеграции

### Для реальных данных потребуется:

1. **Backend API** для получения почасовых данных
2. **SQL запросы** уже готовы в `Hourly sql.txt`
3. **Интерфейсы TypeScript** готовы
4. **UI компоненты** готовы

### Следующие шаги:
1. Реализовать API методы в `app.go`
2. Подключить реальные SQL запросы
3. Обновить функции загрузки данных
4. Добавить экспорт в Excel для почасовых данных

## Файлы изменений

- ✅ `HourlyView.tsx` - новый файл
- ✅ `Dashboard.tsx` - обновлен
- ✅ `Sidebar.tsx` - обновлен  
- ✅ `DailyView.tsx` - расширен
- ✅ `App.tsx` - типы обновлены

Все изменения совместимы с существующим кодом и не нарушают работу других компонентов. 