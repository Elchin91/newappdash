# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Subtopics (Daily)

## –ü—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–ò–∑–Ω–∞—á–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –±—ã–ª–∞ –º–µ–¥–ª–µ–Ω–Ω–æ–π –∏–∑-–∑–∞:
1. **–î–≤–æ–π–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞**: –°–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å —Ç–æ–ø–∏–∫–∏, –ø–æ—Ç–æ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–∞–∂–¥–æ–º—É —Ç–æ–ø–∏–∫—É
2. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–±–æ—Ä–µ —Ç–æ–ø–∏–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
3. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**: –ü–æ—Ç–µ—Ä—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

## –ù–æ–≤–∞—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### üöÄ –ü—Ä–∏–Ω—Ü–∏–ø "Load Once, Filter Locally"

**–°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥:**
```
Apply ‚Üí LoadTopics ‚Üí SelectTopic ‚Üí LoadSubtopics ‚Üí Display
  ‚Üì        ‚Üì           ‚Üì            ‚Üì             ‚Üì
 500ms   800ms      instant      600ms        instant
```

**–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:**
```
Apply ‚Üí LoadAllData ‚Üí SelectTopic ‚Üí FilterLocally ‚Üí Display
  ‚Üì         ‚Üì           ‚Üì             ‚Üì            ‚Üì
 500ms    1200ms     instant      ~10ms        instant
```

### üìä –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### 1. –ï–¥–∏–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
```typescript
case 'subtopics_daily':
  // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–æ–≤ –∏ —á–∞—Ç–æ–≤ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
  const [callDataResponse, chatDataResponse] = await Promise.all([
    GetCallClassifiers(startDate, endDate, queueName),
    GetChatClassifiers(startDate, endDate, queueName)
  ]);
  
  // –û–±—ä–µ–¥–∏–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
  const combinedData = [
    ...(callDataResponse.data || []),
    ...(chatDataResponse.data || [])
  ];
  
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–∏—è
  setAllSubtopicsData(combinedData);
  
  // –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–æ–ø–∏–∫–∏
  extractAvailableTopics(combinedData);
```

#### 2. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ–ø–∏–∫–∞
```typescript
// –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ–ø–∏–∫–∞ –¥–ª—è subtopics_daily
useEffect(() => {
  if (activeMetric === 'subtopics_daily' && selectedTopic && allSubtopicsData.length > 0) {
    console.log('–§–∏–ª—å—Ç—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è —Ç–æ–ø–∏–∫–∞:', selectedTopic);
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    const filteredData = allSubtopicsData.filter(item => item.topic === selectedTopic);
    setData(filteredData);
    
    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
    const uniqueTopics = 1;
    const totalEntries = filteredData.reduce((sum, item) => sum + item.total, 0);
    // ...
  }
}, [selectedTopic, allSubtopicsData, activeMetric, startDate, endDate]);
```

#### 3. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Promise.all()` –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ –∏ —á–∞—Ç–æ–≤
- –°–æ–∫—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ ~40%

### üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–æ–ø–∏–∫–∞** (< 10–º—Å vs 600–º—Å)
2. **–ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** (1 –∑–∞–ø—Ä–æ—Å vs N –∑–∞–ø—Ä–æ—Å–æ–≤)
3. **–õ—É—á—à–∏–π UX** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
4. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–ø–∏–∫–æ–≤

### üìà –ò–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –û–ø–µ—Ä–∞—Ü–∏—è | –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ | –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|---------------|--------------|-----------|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∏–∫–æ–≤ | 800–º—Å | 0–º—Å* | 100% |
| –í—ã–±–æ—Ä —Ç–æ–ø–∏–∫–∞ | 600–º—Å | <10–º—Å | 98% |
| –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–æ–ø–∏–∫–∞–º–∏ | 600–º—Å | <10–º—Å | 98% |

*—Ç–æ–ø–∏–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

#### –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```typescript
const [allSubtopicsData, setAllSubtopicsData] = useState<ClassifierData[]>([]);
const [availableTopics, setAvailableTopics] = useState<Array<{topic: string}>>([]);
const [selectedTopic, setSelectedTopic] = useState<string>('');
```

#### –§—É–Ω–∫—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤
```typescript
const extractAvailableTopics = (data: ClassifierData[]) => {
  const uniqueTopics = Array.from(new Set(data.map(item => item.topic)))
    .filter(topic => topic && topic.trim() !== '')
    .map(topic => ({ topic }))
    .sort((a, b) => a.topic.localeCompare(b.topic));
  
  setAvailableTopics(uniqueTopics);
  return uniqueTopics;
};
```

### üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ö–æ–º–ø—Ä–æ–º–∏—Å—Å**: –ù–µ–±–æ–ª—å—à–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –¥–ª—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å**: ~2-5MB (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä—ë–º–∞ –¥–∞–Ω–Ω—ã—Ö)
- **–í—ã–∏–≥—Ä—ã—à –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏**: 95%+ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã–±–æ—Ä–∞ —Ç–æ–ø–∏–∫–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ë—ã—Å—Ç—Ä–∞—è –∏ –æ—Ç–∑—ã–≤—á–∏–≤–∞—è —Ä–∞–±–æ—Ç–∞**  
‚úÖ **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä**  
‚úÖ **–û—Ç–ª–∏—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç**  
‚úÖ **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é**

–ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –¥–µ–ª–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å—É–±—Ç–æ–ø–∏–∫–∞–º–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ–π –∏ —É–¥–æ–±–Ω–æ–π. 