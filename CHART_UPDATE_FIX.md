# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ –º–µ—Ç—Ä–∏–∫–∏

## –ü—Ä–æ–±–ª–µ–º–∞ üö´
–ì—Ä–∞—Ñ–∏–∫ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å Calls –Ω–∞ AHT). 

**–ü—Ä–∏—á–∏–Ω–∞:** –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ (`chartData`) –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –≤ `processData()`, –Ω–æ –Ω–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ `activeMetric`.

## –†–µ—à–µ–Ω–∏–µ ‚úÖ

### 1. –†–∞–∑–¥–µ–ª–∏–ª–∏ –ª–æ–≥–∏–∫—É –Ω–∞ –¥–≤–∞ useEffect:

#### ‚ùå –ë—ã–ª–æ:
```typescript
// –û–¥–∏–Ω useEffect –¥–ª—è –≤—Å–µ–≥–æ - –≤–∫–ª—é—á–∞—è activeMetric
useEffect(() => {
  if (shouldLoadData && queueName === 'm10') {
    loadData();
  }
}, [shouldLoadData, activeMetric, queueName, startDate, endDate]);
```
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Å–º–µ–Ω–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### ‚úÖ –°—Ç–∞–ª–æ:
```typescript
// useEffect –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–±–µ–∑ activeMetric)
useEffect(() => {
  if (shouldLoadData && queueName === 'm10') {
    loadData();
  }
}, [shouldLoadData, queueName, startDate, endDate]);

// –û—Ç–¥–µ–ª—å–Ω—ã–π useEffect –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞
useEffect(() => {
  if (tableData.length > 0) {
    updateChartData();
  }
}, [activeMetric, tableData]);
```

### 2. –°–æ–∑–¥–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `updateChartData()`:

```typescript
const updateChartData = () => {
  if (tableData.length === 0) return;

  let chartRows: any[] = [];
  switch (activeMetric) {
    case 'calls':
      chartRows = tableData.map(row => ({
        date: formatDate(row.date),
        value: row.total_calls,
        name: 'Calls'
      }));
      break;
    case 'aht':
      chartRows = tableData.map(row => ({
        date: formatDate(row.date),
        value: row.avg_call_duration_minutes,
        name: 'AHT (min.)'
      }));
      break;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  }

  setChartData(chartRows);
};
```

### 3. –£–±—Ä–∞–ª–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –∏–∑ `processData()`:

#### ‚ùå –ë—ã–ª–æ:
```typescript
const processData = (rawData: any) => {
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã
  setTableData(processedData);

  // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è chartData
  let chartRows = [];
  switch (activeMetric) {
    // ... –¥–ª–∏–Ω–Ω—ã–π switch
  }
  setChartData(chartRows);
};
```

#### ‚úÖ –°—Ç–∞–ª–æ:
```typescript
const processData = (rawData: any) => {
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü—ã
  setTableData(processedData);
  // –í—Å—ë! chartData –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ useEffect
};
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç üéØ

### –¢–µ–ø–µ—Ä—å –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
1. **–ü—Ä–∏ —Å–º–µ–Ω–µ –º–µ—Ç—Ä–∏–∫–∏** - –≥—Ä–∞—Ñ–∏–∫ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
2. **–ü—Ä–∏ —Å–º–µ–Ω–µ –¥–∞—Ç** - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è  
3. **–ü—Ä–∏ —Å–º–µ–Ω–µ –æ—á–µ—Ä–µ–¥–∏** - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –≥—Ä–∞—Ñ–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:
```
–°–º–µ–Ω–∞ –º–µ—Ç—Ä–∏–∫–∏ ‚Üí useEffect [activeMetric] ‚Üí updateChartData() ‚Üí setChartData() ‚Üí prepareChartData() ‚Üí –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** - –±–µ–∑ –ª–∏—à–Ω–∏—Ö API –≤—ã–∑–æ–≤–æ–≤
- ‚úÖ **–ß–∏—Å—Ç—ã–π –∫–æ–¥** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏  
- ‚úÖ **–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å** - –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–º–µ–Ω—É –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –∏—Å–∫–ª—é—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ –≤–∏–¥–µ—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ! üìä 