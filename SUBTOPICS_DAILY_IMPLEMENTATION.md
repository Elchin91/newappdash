# Реализация функциональности "Subtopics (Daily)"

## Описание
Добавлена новая метрика "Subtopics (Daily)" в раздел Classifiers, которая позволяет:
1. Выбрать топик из выпадающего списка
2. Просмотреть субтопики выбранного топика в виде таблицы по дням

## Изменения в коде

### 1. Backend (Go)

#### app.go
- **GetAvailableTopics()** - Новый метод для получения списка доступных топиков
  - Использует MongoDB агрегацию для извлечения уникальных топиков
  - Поддерживает фильтрацию по очередям (all, m10, aml)
  - Возвращает отсортированный список топиков

- **GetSubtopicsDaily()** - Новый метод для получения субтопиков выбранного топика
  - Принимает параметр selectedTopic для фильтрации
  - Возвращает данные субтопиков по дням
  - Использует ту же логику парсинга path, что и другие классификаторы

### 2. Frontend (TypeScript/React)

#### Обновлённые типы
```typescript
type ClassifierMetric = 'call' | 'chat' | 'overall' | 'topics' | 'subtopics_daily';
```

#### Файлы с изменениями:
- `frontend/src/components/Sidebar.tsx`
- `frontend/src/components/ClassifiersView.tsx`
- `frontend/src/App.tsx`
- `frontend/src/components/Dashboard.tsx`

#### Новая функциональность в ClassifiersView.tsx
- **Состояния:**
  - `availableTopics` - список доступных топиков
  - `selectedTopic` - выбранный топик
  - `loadingTopics` - состояние загрузки топиков

- **Функции:**
  - `loadAvailableTopics()` - загрузка списка топиков
  - `prepareSubtopicsDailyTableData()` - подготовка данных таблицы для субтопиков

#### UI компоненты
- **Выпадающий список топиков** - отображается только для метрики 'subtopics_daily'
- **Адаптивная таблица** - показывает только субтопики для выбранного топика
- **Информационное сообщение** - появляется, когда топик не выбран

## Особенности реализации

### 1. Условный рендеринг
- Выпадающий список отображается только для метрики 'subtopics_daily'
- Таблица скрывается, если топик не выбран
- Второй столбец таблицы скрыт для этой метрики

### 2. Интеграция с существующим кодом
- Использует существующую систему сортировки и фильтрации
- Совместима с функцией экспорта в Excel
- Поддерживает копирование данных столбцов

### 3. MongoDB агрегация
- Использует ту же логику парсинга classifiers.path
- Поддерживает временную зону Asia/Baku
- Фильтрует данные по выбранному топику

## Пример использования

1. Пользователь выбирает раздел "Classifiers"
2. Выбирает метрику "Subtopics (Daily)"
3. Задаёт период дат
4. Выбирает очередь (all, m10, aml)
5. Нажимает "Apply" - загружаются доступные топики
6. Выбирает топик из выпадающего списка
7. Автоматически загружаются и отображаются субтопики выбранного топика

## Результат
Новая функциональность полностью интегрирована в существующую систему и готова к использованию. Все изменения совместимы с остальным кодом приложения. 